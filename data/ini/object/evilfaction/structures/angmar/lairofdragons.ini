;------------------------------------------------------------------------------
Object AngmarLairOfDragons

	SelectPortrait = BPCDrakeLair
 
	; *** ART Parameters ***
	Draw = W3DScriptedModelDraw ModuleTag_Draw
	
		DefaultModelConditionState
			Model = NBDrakeLair
			Texture	= s3_lava.tga aulairdrlava.tga
		End
		
		;-- building being constructed
		ModelConditionState = SNOW AWAITING_CONSTRUCTION
			Model			= NBDrakeLair_A
			Texture			= WBStone.tga WBStone_snow.tga
			Texture	                = s3_lava.tga aulairdrlava.tga
		End

    	ModelConditionState   = AWAITING_CONSTRUCTION 
      		Model               = NBDrakeLair_A
		Texture	            = s3_lava.tga aulairdrlava.tga
    	End
    	AnimationState        = AWAITING_CONSTRUCTION
      		Animation           = NBDrakeLair_A
        		AnimationName     = NBDrakeLair_A.NBDrakeLair_A
        		AnimationMode     = MANUAL
      		End
	  		Flags				  = START_FRAME_FIRST
    	End

		ModelConditionState = SNOW ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
			Model			= NBDrakeLair_A
			Texture			= WBStone.tga WBStone_snow.tga
			Texture	                = s3_lava.tga aulairdrlava.tga
		End
    	ModelConditionState   = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      	Model               = NBDrakeLair_A
	Texture	            = s3_lava.tga aulairdrlava.tga
			;ParticleSysBone   = DUSTBONE BuildingContructDust
    	End
    	AnimationState        = ACTIVELY_BEING_CONSTRUCTED PARTIALLY_CONSTRUCTED
      		Animation           = NBDrakeLair_A
        		AnimationName     = NBDrakeLair_A.NBDrakeLair_A
        		AnimationMode     = MANUAL
      		End
			Flags				= START_FRAME_FIRST
			StateName			= BeingConstructed  
	    End
		;--damaged building
	  
		ModelConditionState  = DAMAGED
			Model         = NBDrakeLair_D1  
			Texture	      = s3_lava.tga aulairdrlava.tga
		End
		AnimationState = DAMAGED
			EnteringStateFX	= FX_BuildingDamaged
		End	    
		
		ModelConditionState  = REALLYDAMAGED
			Model         = NBDrakeLair_D2
			Texture	      = s3_lava.tga aulairdrlava.tga
		End
	    
	    AnimationState = REALLYDAMAGED
      		Animation				=	RubbleAnimation
				AnimationName		=	 NBDrakeLair_D2.NBDrakeLair_D2
				AnimationMode		=	ONCE
  			End
		    EnteringStateFX	= FX_BuildingReallyDamaged
		End
 
		ModelConditionState  = COLLAPSING
			Model         = NBDrakeLair_D3
			Texture	      = s3_lava.tga aulairdrlava.tga
		End
		
		AnimationState = COLLAPSING
      		Animation				=	RubbleAnimation
				AnimationName		=	 NBDrakeLair_D3.NBDrakeLair_D3
				AnimationMode		=	ONCE
  			End
  			EnteringStateFX	= FX_StructureMediumCollapse
		End

		ModelConditionState  = RUBBLE
			Model         = None  
		End  
		
		ModelConditionState  = POST_RUBBLE
			Model         = NONE
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		
		AnimationState = POST_RUBBLE
		End

		ModelConditionState  = POST_COLLAPSE
		Model         = None
			ParticleSysBone NONE SmokeBuildingMediumRubble
		End
		
		AnimationState = POST_COLLAPSE
		End 

		ModelConditionState = SNOW 
			Model			= NBDrakeLair
			Texture			= WBStone.tga WBStone_snow.tga
			Texture	                = s3_lava.tga aulairdrlava.tga
		End

	End

	Draw = W3DFloorDraw ModuleTag_DrawFloor
		ModelName = NBDrakeL_Bib
		WeatherTexture		= SNOWY NBDrakeLair_bib_Snow.tga
	End
	  
	PlacementViewAngle  = 0
 
 	CommandSet = LairOfDragonsCommandSet
 
	; ***DESIGN parameters ***
	DisplayName			= OBJECT:LairOfDragons
	Side				= Angmar
	IsTrainable		= Yes
	EditorSorting		= STRUCTURE
	ThreatLevel			= 1.0
	PlacementViewAngle	= 90	

	BuildCost			= 1400
	BuildTime			= 30

	VisionRange         = MORDOR_ORCPIT_VISION_RANGE
	ShroudClearingRange = MORDOR_ORCPIT_SHROUD_CLEAR

	ArmorSet
		Conditions		= None
		Armor			= MonsterLair
	End


	; *** AUDIO Parameters ***

	VoiceSelect         		= CreepBuildingGenericSelect	;MordorTrollCageSelect			;MordorOrcPitSelect

	;SoundAmbient        		= MordorOrcPitAmbience
	SoundOnDamaged			= BuildingLightDamageStone
	SoundOnReallyDamaged		= BuildingHeavyDamageStone

 
	; *** ENGINEERING Parameters ***
	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE IMMOBILE SELECTABLE SCORE AUTO_RALLYPOINT IGNORE_FOR_VICTORY
 
	Body						= ActiveBody ModuleTag_Body
		MaxHealth				= 2000
		MaxHealthDamaged			= 1000
		MaxHealthReallyDamaged			= 500
	End
	
	Behavior = GettingBuiltBehavior ModuleTag_04
		RebuildWhenDead				= Yes
		SelfBuildingLoop			= BuildingConstructionLoop ; Only played if we DON'T spawn a worker
		SelfRepairFromDamageLoop	= NoSound         ; This doesn't cause an animation, so don't bother playing a sound
		SelfRepairFromRubbleLoop	= BuildingConstructionLoop
		DisallowRebuildRange		= 300
		DisallowRebuildFilter		= ANY +STRUCTURE
                WorkerName		  = MordorWorkerNoSelect
		SpawnTimer					= 300
	End

	Behavior = KeepObjectDie ModuleTag_IWantRubble
	End
	
	Behavior = StructureCollapseUpdate ModuleTag_Collapse
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 120
	End

	Behavior = ProductionUpdate ProductionUpdateModuleTag
		NumDoorAnimations            = 0
		DoorOpeningTime              = 3250  ;in mSeconds how long you want doors to be in open state
		DoorWaitOpenTime             = 2000  ;in mSeconds time the door stays open, so units can exit
		DoorCloseTime                = 4000  ;in mSeconds how long you want doors to be in open state
		ConstructionCompleteDuration = 1500  ;in mSeconds   wait time so if you have multiple units they don't run over each other
	End
	
	Behavior = QueueProductionExitUpdate ModuleTag_Exit
		PlacementViewAngle	= 10
		UnitCreatePoint		= X:0.0 Y:10.0 Z:0.0
		NaturalRallyPoint	= X:90.0 Y:25.0 Z:0.0	;NaturalRallyPointX must always match GeometryMajorRadius! 
	End  

	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
		Radius = 50		; How far we try to claim ground
		MaxIncome = 0	; If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval = 999999	; How often (in msec) we give that much money
		HighPriority = Yes ; A high priority claim gets to pretend it was there first.
		Visible = No 		;// Don't show decal when a resource building is selected.
	End

	Geometry			= CYLINDER
	GeometryMajorRadius	= 50.0
	GeometryMinorRadius	= 50.0
	GeometryHeight		= 35
	GeometryIsSmall		= No
	
	GeometryContactPoint = X: 15 Y: 15 Z:20 Swoop
	GeometryContactPoint = X:-15 Y:-15 Z:20 Swoop
	GeometryContactPoint = X:-15 Y: 15 Z:20 Swoop
	GeometryContactPoint = X: 15 Y:-15 Z:20 Swoop
	
	Shadow				= SHADOW_DECAL
	BuildCompletion		= PLACED_BY_PLAYER
End
