;------------------------------------------------------------------------------
; 
Object WraithOfDeadLand
    ; *** ART Parameters ***

    ; SelectPortrait for Heros is portrait behind skill buttons. HP = HeroPortrait.
    SelectPortrait =  UPWraithOfDeadland
    
    ; ButtonImage for Heros is button image on Hero Select UI to select hero. HI = HeroIcon or HeroImage.
    ButtonImage = UIWraithOfDeadland

	Draw = W3DHordeModelDraw ModuleTag_Draw

		DefaultModelConditionState
                        Model		= MUNazgul_SKN
                        ParticleSysBone = NONE BlackRiderFlare2 FollowBone:no
                        Texture         = MUBlkRiderH.tga wurhwraithskn.tga
 		End
 
		IdleAnimationState
			StateName				= Idle
			Animation
				AnimationName       = MUNazgul_SKL.MUNazgul_IDLB
				AnimationPriority	= 4
				AnimationBlendTime	= 15
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = MUNazgul_SKL.MUNazgul_IDLC
				AnimationPriority	= 1
				AnimationBlendTime	= 15
				AnimationMode       = ONCE
			End
			Animation
				AnimationName       = MUNazgul_SKL.MUNazgul_IDLD
				AnimationPriority = 1
				AnimationBlendTime	= 15
				AnimationMode       = ONCE
			End
			Flags				=	RESTART_ANIM_WHEN_COMPLETE		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected" then CurDrawableSetTransitionAnimState("TRANS_Selected_to_Idle") end
			EndScript	
		End



		TransitionState					=	TRANS_Idle_to_Selected
			Animation					=	ATNA
				AnimationName			=	MUBlkRider_SKL.MUBlkRider_ATNA
				AnimationMode			=	ONCE
				AnimationSpeedFactorRange = 0.8 1.2
			End
		End
		
		
		TransitionState					=	TRANS_Selected_to_Idle
			Animation					=	ATNA
				AnimationName			=	MUBlkRider_SKL.MUBlkRider_ATNA
				AnimationMode			=	ONCE_BACKWARDS
				AnimationSpeedFactorRange = 0.8 1.2
			End
			Flags						= START_FRAME_LAST
		End
		
		
		;-------------------------- NON MOUNTED VERSION ---------------------------------------------------------
		
		
		
		AnimationState				=	DYING BURNINGDEATH
			Animation
				AnimationName		=	MUNazgul_SKL.MUNazgul_DTHA
				AnimationMode		=	ONCE
				AnimationBlendTime	=	10
			End
		End
		

		AnimationState = DYING
			Animation
				AnimationName       = MUNazgul_SKL.MUNazgul_DTHA
				AnimationMode       = ONCE
			End
		End
		
		AnimationState				=	BURNINGDEATH
			Animation
				AnimationName		=	MUNazgul_SKL.MUNazgul_MFDA
				AnimationMode		=	LOOP
				Distance			=	90
			End
		End

		AnimationState = FREEFALL
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_FLYA
				AnimationMode = LOOP
			End
			Flags = RANDOMSTART
		End
		
		AnimationState = STUNNED_FLAILING
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_FLYA
				AnimationMode = LOOP
				AnimationSpeedFactorRange	= 0.4 0.6
			End
			Flags = RANDOMSTART
		End
		
		;если убрать то не нужно подниматься с земли, т.е. сбить с ног - невозможно
		;AnimationState = STUNNED_STANDING_UP
		;	Animation
		;		AnimationName = MUNazgul_SKL.MUNazgul_GTPA
		;		AnimationMode = ONCE
		;	End
		;End			

		AnimationState = MOVING FIRING_OR_PREATTACK_A
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_RUNB
				AnimationMode = LOOP
			End
			
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End
				
		AnimationState = FIRING_OR_PREATTACK_A
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_ATKA
				AnimationMode = ONCE
			End
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_ATKB
				AnimationMode = ONCE
			End
		End

		AnimationState = MOVING
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_RUNA
				AnimationMode = LOOP
			End
			Flags = RESTART_ANIM_WHEN_COMPLETE
		End

		; --------- Click and Hit Reactions ------------
		AnimationState = HIT_REACTION HIT_LEVEL_1
			Animation = Hit_Level_1_a
				AnimationName = MUNazgul_SKL.MUNazgul_HITA
				AnimationMode = ONCE
			End
		End
			
		AnimationState = LEVELED
			Animation = Hit_Level_1_a
				AnimationName = MUNazgul_SKL.MUNazgul_LVLA
				AnimationMode = ONCE
			End
		End			
			
;		AnimationState = ENGAGED
;			Animation
;				AnimationName = MUNazgul_SKL.MUNazgul_APPA
;				AnimationMode = LOOP
;			End
;		End
		
		
		AnimationState = EMOTION_CELEBRATING
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_CHRA
				AnimationMode = LOOP
			End
		End
		
		AnimationState							= EMOTION_TAUNTING
			Animation							= TNTA
				AnimationName					= MUNazgul_SKL.MUNazgul_TNTA
				AnimationMode					= ONCE
				AnimationSpeedFactorRange		= 0.8 1.2
			End
		End
				
		AnimationState = RAISING_FLAG
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_CHRA
				AnimationMode = LOOP
			End
		End

		AnimationState = SELECTED
			Animation
				AnimationName = MUNazgul_SKL.MUNazgul_ATNB
				AnimationMode = LOOP
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Idle" then CurDrawableSetTransitionAnimState("TRANS_Idle_to_Selected") end
			EndScript			
		End
		
    TransitionState = TRANS_Idle_to_Selected
		Animation = ATNA
			AnimationName		= MUNazgul_SKL.MUNazgul_ATNA
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    End
    
    TransitionState = TRANS_Selected_to_Idle
		Animation = ATNF
			AnimationName		= MUNazgul_SKL.MUNazgul_ATNF
			AnimationMode		= ONCE
			AnimationBlendTime	= 10
		End
    End
    		
End

    ; ***DESIGN parameters ***
    Side        = Angmar
    IsTrainable    = Yes
    EditorSorting    = UNIT
    ThreatLevel    = 1.0
    ThingClass    = HORDE_UNIT
    CommandPoints    = 5         ; originally 2
    CommandSet = GenericCommandSet
    TransportSlotCount = TRANSPORTSLOTCOUNT_UNIT

    BountyValue		= 15
    
    WeaponSet
        Weapon = PRIMARY EvilMenBlackRiderSword
    End

    ArmorSet
        Conditions      = None
        Armor           = NazgulArmor_fem
        DamageFX        = None
    End

    VisionRange			= 175.0
    ShroudClearingRange	= 200.0

    DisplayName = EVILMOD:WraithOfDeadLand

    CrushableLevel = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
    CrusherLevel = 0
    ;RamPower = 30;
    ;RamZMult = 0.5;
 

    ; *** AUDIO Parameters ***;

    VoiceAttack                = BarrowWightVoxAttack
    VoiceGuard                = BarrowWightVoxAttack
    //VoiceCreated            = EVA:WraithsOfRhunCreated
    VoiceCreated            = +SOUND:BarrowWightVoxCreated
    //VoiceFullyCreated        = EVA:WraithsOfRhunCreated
    VoiceFullyCreated        = +SOUND:BarrowWightVoxCreated
    VoiceMove                = BarrowWightVoxSelect
    VoicePriority            = 15
    VoiceSelect                = BarrowWightVoxSelect

    SoundAmbient            = WightNewAmbienceMS
    SoundImpact                = ImpactHorse
    ;SoundMoveStart            = BarrowWightMoveStart

    UnitSpecificSounds
        VoiceGarrison                        = BarrowWightVoxSelect
        VoiceEnterUnitElvenTransportShip    = BarrowWightVoxSelect
        VoiceEnterUnitEvilMenTransportShip    = BarrowWightVoxSelect
        VoiceEnterUnitMordorMumakil            = BarrowWightVoxSelect
        VoiceEnterUnitSlaughterHouse        = BarrowWightVoxSelect
        VoiceInitiateCaptureBuilding        = BarrowWightVoxSelect
    End

    #include "..\..\..\includes\StandardUnitEvaEvents.inc"

    ; *** ENGINEERING Parameters ***
    RadarPriority = UNIT
    KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY MONSTER PATH_THROUGH_INFANTRY NO_COLLIDE ARMY_SUMMARY SCARY HORDE_MONSTER
 
    Body = ActiveBody ModuleTag_02
        CheerRadius             = EMOTION_CHEER_RADIUS
        MaxHealth                 = 1500
    End
 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes			= ALL 
		SinkDelay			= 0
		SinkRate			= -2.0     ; in Dist/Sec
		DestructionDelay	= 3000
		FX					= INITIAL FX_SmallSpiderDie
		Sound				= INITIAL BarrowWightVoxDie
	End

    Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = FighterHorde
    End

	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle	= Yes
		MoodAttackCheckRate			= 500
		MaxCowerTime				= 7500
		MinCowerTime				= 5000
		AILuaEventsList				= BarrowWightFunctions
	End

    LocomotorSet
        Locomotor = NazgulLocomotor
        Condition = SET_NORMAL
        Speed     = 40
    End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		AddEmotion	=	Terror_Base
		AlwaysAfraidOf			= NONE +CloudBreakSunbeam +SunflareSunbeam
		AddEmotion	=	Alert_Base
		IgnoreVeterancy			= Yes
	End
  
    Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 0
    End

    Behavior = SquishCollide ModuleTag_06
        ;nothing
    End
 
    Behavior = NotifyTargetsOfImminentProbableCrushingUpdate ModuleTag_NotifyCrushScan
    End

	Geometry			= CYLINDER
	GeometryMajorRadius = 10.0
	GeometryHeight		= 30.0
	GeometryIsSmall		= No
	
	Geometry			= CYLINDER
	GeometryMajorRadius = 16.0
	GeometryHeight		= 25.0
	GeometryIsSmall		= Yes

	Shadow				= SHADOW_DECAL
	ShadowSizeX			= 30
	ShadowSizeY			= 21
	ShadowTexture		= ShadowI

End
