;// This is file for test new unit //////////////////////////////////////////////////
;// EvilModTest.ini	 /////////////////////////////////////////////////////////////////
;// Not all testing objects include, i delete some...
;////////////////////////////////////////////////////////////////////////////////////


; -----------------------------------------------------------------------------
Object TestingDarken //провал
;  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_02
    DefaultModelConditionState
      Model = NONE
	
	ParticleSysBone = NONE TestingDarkenFX
    End
  End
;
;  ; ***DESIGN parameters ***
  EditorSorting = SYSTEM
;
 

;  ; *** ENGINEERING Parameters ***  
  KindOf        = NO_COLLIDE NO_HEAL_ICON IGNORES_SELECT_ALL IGNORED_IN_GUI UNATTACKABLE ENVIRONMENT IGNORE_FOR_VICTORY

 
End


;/////////////////////////////////////////////// МАЯ
;New Wizard from map "gladiator_servants_of_darkness_by_jbv3737"
; aka Eowyn
Object ObjectNumer_1

	Behavior = GrantUpgradeCreate ModuleTag_1
		UpgradeToGrant = Upgrade_SarumanThunderBolt Upgrade_SarumanFireBall Upgrade_SarumanDominate
		//UpgradeToGrant = 
		//UpgradeToGrant = 
	End

	; *** ART Parameters ***

    	SelectPortrait = CPAvatar
	ButtonImage = HICAHAvatar
	
	DescriptionStrategic = CONTROLBAR:LW_ToolTip_Eowyn
    
	Draw = W3DScriptedModelDraw ModuleTag_DRAW1

		RandomTexture	= mubalrog.tga 0 CHWZ_WD.tga
		;GlowEnabled = Yes

		DefaultModelConditionState
			Model               		= CHWZ_AV_U_SKN
			Skeleton            		= CHWZ_YW_U_SKL
			WeaponLaunchBone	 = PRIMARY B_STAFF
			ParticleSysBone = B_STAFF VergothStaff1 FollowBone:Yes
			ParticleSysBone = B_STAFF VergothStaff2 FollowBone:Yes 
		End

		ModelConditionState = WEAPONSET_HERO_MODE
			ParticleSysBone = B_PELVIS VergothBladeMaster FollowBone:Yes
			ParticleSysBone = B_PELVIS VergothBladeMasterCrystalSphere FollowBone:Yes
		End

; -----------------------------Abillites Animations----------------------------

		AnimationState        =  SPECIAL_WEAPON_ONE
			StateName = Attacking_throw
			Animation
				AnimationName		= CHWZ_YW_U_SPCA  
				AnimationMode       = ONCE
				AnimationBlendTime	= 10
				AnimationSpeedFactorRange = 1.0 1.0
			End
			ParticleSysBone = B_STAFF VergothStaffAttack1 FollowBone:Yes
		End

		AnimationState        =  SPECIAL_WEAPON_TWO
			StateName = Attacking_throw
			Animation
				AnimationName		= CHWZ_YW_U_SPCC
				AnimationMode       = ONCE
				AnimationBlendTime	= 25
				AnimationSpeedFactorRange = 0.8 0.8
			End

			ParticleSysBone = B_STAFF VergothStaffAttack1 FollowBone:Yes

			ParticleSysBone = None VergothBlastInitialCenter FollowBone:Yes


		End

		AnimationState        =  SPECIAL_WEAPON_THREE
			StateName = Attacking_throw
			Animation
				AnimationName		= CHWZ_YW_U_IBFB   ;CHWZ_YW_U_WPNA  ;CHWZ_YW_U_IBFA   ;CHWZ_YW_U_SPCA  
				AnimationMode       = ONCE
				AnimationBlendTime	= 5
				AnimationSpeedFactorRange = 1.1 1.1
			End
			ParticleSysBone = B_STAFF VergothFireMorgoth1 FollowBone:Yes

		End


;---------------------------------------------------------------------------------------------------

		AnimationState        = UNPACKING PACKING_TYPE_1
			Animation           = ATKA1
				AnimationName     = CHWZ_YW_U_CHRA
				AnimationMode     = ONCE
				AnimationBlendTime			= 25
				AnimationSpeedFactorRange	= 0.5 0.5
			End

			ParticleSysBone = None VergothLightningStart01 FollowBone:Yes
			ParticleSysBone = None VergothLightningStart02 FollowBone:Yes
		
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

		AnimationState        = PREPARING PACKING_TYPE_1
			Animation           = ATKA2
				AnimationName     = CHWZ_YW_U_CHRA
				AnimationMode     = LOOP
				AnimationSpeedFactorRange = 0.5 0.5
				AnimationBlendTime			= 25

			End
			FrameForPristineBonePositions = 35

			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End
		
		AnimationState        = PACKING PACKING_TYPE_1
			Animation           = ATKA3
				AnimationName     = CHWZ_YW_U_IDLB  ;CHWZ_YW_U_CHRA
				AnimationMode     = ONCE
				;AnimationBlendTime			= 25
				AnimationSpeedFactorRange	= 0.5 0.5
			End


			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Sword" then CurDrawableSetTransitionAnimState("TRANS_SwitchToBow") end
				CurDrawableHideSubObject("arrow") ;Circumvents blend issues when the arrow is being shown...
			EndScript
		End

;-------------------------End Abillities animations-------------------------

AnimationState        = STUNNED_FLAILING 
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHWZ_YW_U_FLYA
		AnimationMode     = LOOP
	End
	Flags               = RANDOMSTART
End


AnimationState        = DYING SPLATTED
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHWZ_YW_U_LNDA
		AnimationMode     = ONCE
	End
End

AnimationState        = DYING
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHWZ_YW_U_DIEA
		AnimationMode     = ONCE
	End
	Animation           = GUHero_DIEB
		AnimationName     = CHWZ_YW_U_DIEB
		AnimationMode     = ONCE
	End
End



AnimationState        = STUNNED_STANDING_UP
	StateName           = STATE_Sword
	Animation
		AnimationName     = CHWZ_YW_U_GTPA
		AnimationMode     = ONCE
		AnimationSpeedFactorRange = 0.9 0.9   ;1.5 1.5
		AnimationBlendTime = 25
	End
End


AnimationState        = STUNNED 
	StateName           = STATE_Sword
	Animation           = GUHero_LNDA
		AnimationName     = CHWZ_YW_U_LNDA
		AnimationMode     = ONCE
	End
End				

		
//------------------ MOVING -------------------------------------------------------------


		//--- Running with sword
		AnimationState			= MOVING
			StateName           = STATE_RunningSword
			Flags               = RANDOMSTART
			//ParticleSysBone    = None InfantryDustTrails
			Animation
				AnimationName   = CHWZ_YW_U_RUNA
//				AnimationMode   = LOOP
				AnimationSpeedFactorRange = 1.0 1.0	
//				Distance = 28
			End
			BeginScript
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
				if Prev == "STATE_RunningBow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword_Running") end
				if Prev == "STATE_Rappelling"  then CurDrawableSetTransitionAnimState("Trans_RappellingToRunning") return end
			EndScript
		End



		AnimationState				= FIRING_OR_PREATTACK_A // Melee attack.

			Animation ; Default attack, staff hiting
				AnimationName		= CHWZ_YW_U_ATKA
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHWZ_YW_U_ATKB
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 1.2 1.2	
			End
			Animation
				AnimationName		= CHWZ_YW_U_ATKC
				AnimationMode		= ONCE
				UseWeaponTiming		= Yes
				AnimationPriority   = 20
				AnimationSpeedFactorRange = 1.2 1.2	
			End
		

			ParticleSysBone = B_STAFF VergothStaffAttack1 FollowBone:Yes
			ParticleSysBone = NONE VergothStaffAttack2 FollowBone:Yes
		End


		
//-------------------- HIT REACTIONS -----------------------------------------------------------


		AnimationState = HIT_REACTION
			Animation = Sword_HITA
				AnimationName = CHWZ_YW_U_HITA
				AnimationMode = ONCE
			End
			Animation = Sword_HITB
				AnimationName = CHWZ_YW_U_HITB
				AnimationMode = ONCE
			End

			BeginScript
				PrevAnim = CurDrawablePrevAnimation()
				if PrevAnim == "Foot_IDLB"
				then
					return "Sword_HITB"
				else
					return "Swort_HITA"
				end
			EndScript
		End

		AnimationState				= LEVELED 						// This state clears itself in 3 seconds
			Animation				= LevelUp
				AnimationName		= CHWZ_YW_U_CHRA CHSS_UK_U_LVLA
				AnimationMode		= ONCE
			End
		End


//---------------------- EMOTIONS ---------------------------------------------------------------


		// cheer, on foot
		AnimationState				=	EMOTION_CELEBRATING
			Animation CHRA
				AnimationName		=	CHWZ_YW_U_CHRA CHWZ_YW_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHWZ_YW_U_CHRB CHWZ_YW_U_CHRA CHWZ_YW_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRC
				AnimationName		=	CHWZ_YW_U_CHRA   ;CHWZ_YW_U_SPCA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End
	
		
		// taunt, on foot
		AnimationState				=	EMOTION_TAUNTING
			Animation CHRA
				AnimationName		=	CHWZ_YW_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRB
				AnimationName		=	CHWZ_YW_U_TNTB CHWZ_YW_U_TNTA
				AnimationMode		=	ONCE
			End
			Animation CHRC
				AnimationName		=	CHWZ_YW_U_CHRA  ;CHWZ_YW_U_SPCA
				AnimationMode		=	ONCE
			End
			Flags					=	RESTART_ANIM_WHEN_COMPLETE
		End


//====== ENGAGED
		AnimationState				= ENGAGED
			StateName				= STATE_ready
			Animation
				AnimationName		= CHWZ_YW_U_IDLA
				AnimationMode		= ONCE
			End
		End

		
		IdleAnimationState
			StateName					= STATE_Idle_Sword	
			Animation = Foot_IDLB ; Bored Idle
				AnimationName       = CHWZ_YW_U_IDLB
				AnimationMode       = ONCE
				AnimationPriority   = 40
			End
			Animation = Foot_IDLC ; Bored Fidget
				AnimationName       = CHWZ_YW_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End
			Animation = Foot_IDLD ; Bored Fidget ; greatly changed and different from the ability
				AnimationName       = CHWZ_YW_U_IBFB
				AnimationMode       = ONCE
				AnimationSpeedFactorRange = 0.5 0.5
				AnimationPriority   = 1
				AnimationBlendTime = 50
			End

			Animation = Foot_IDLE ; Bored Fidget
				AnimationName       = CHWZ_YW_U_WPNA
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End

			Animation = Foot_IDLF ; Bored Fidget
				AnimationName       = CHWZ_YW_U_SPCB
				AnimationMode       = ONCE
				AnimationPriority   = 1
			End

			Animation = Foot_IDLG ; Bored Fidget
				AnimationName       = CHWZ_YW_U_IBFA
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.5 0.5
				AnimationBlendTime = 30
			End

			Animation = Foot_IDLH ; Bored Fidget
				AnimationName       = CHWZ_YW_U_WPNA
				AnimationMode       = ONCE
				AnimationPriority   = 1
				AnimationSpeedFactorRange = 0.5 0.5
				AnimationBlendTime = 5
			End


			BeginScript
				CurDrawableHideSubObject("arrow")
				Prev = CurDrawablePrevAnimationState()
				if Prev == "STATE_Selected_Sword" then CurDrawableSetTransitionAnimState("TRANS_SelectedToBoredSword") end
				if Prev == "STATE_Idle_Bow" then CurDrawableSetTransitionAnimState("TRANS_BowToSword") end
			EndScript
		End
		

	//---transitions--------------------------------------------

		TransitionState = TRANS_BoredToSelectedSword
		// Once we have proper animations for enter -> idle -> exit, fix this properly.
			Animation = ANTD
				AnimationName	= CHWZ_YW_U_ATNA CHWZ_YW_U_ATND CHWZ_YW_U_IDLA
				AnimationMode	= ONCE
			End		
		End
		
		TransitionState = TRANS_SelectedToBoredSword
			Animation			= ATNF
				AnimationName	= CHWZ_YW_U_ATNC CHWZ_YW_U_ATNF CHWZ_YW_U_ATNE
				AnimationMode	= ONCE
			End		
		End	
		


		TransitionState       = TRANS_BowToSword
			Animation           = CUHero_STHA
				AnimationName     = CHWZ_YW_B_STHA
				AnimationMode     = ONCE
			End
		End



		TransitionState       		= TRANS_BowToSword_Running
			Animation           	= DrawSwords
				AnimationName       = CHWZ_YW_B_STHB
				AnimationMode       = ONCE
			End
		End
		

	End

	Behavior = SubObjectsUpgrade Body_471438
		TriggeredBy			   = Upgrade_AragornBladeMaster
		UpgradeTexture		   = CHWZ_WD.tga	0 mubalrog.tga
		RecolorHouse		   = No
	End

	Behavior = SubObjectsUpgrade ModuleTag_Upgrade1
	TriggeredBy			   = Upgrade_AragornBladeMaster
	HideSubObjects		   = SLDR_01
	HideSubObjects		   = SLDR_02


	HideSubObjects		   = HLMT_01
	HideSubObjects		   = HLMT_02
	HideSubObjects		   = HLMT_03
	;HideSubObjects		   = HLMT_04
	;HideSubObjects		   = HLMT_05
	HideSubObjects		   = HLMT_06
	;HideSubObjects		   = HLMT_07

	HideSubObjects		   = HAIR_01

	HideSubObjects		   = GNLT_01
	HideSubObjects		   = GNLT_02
	HideSubObjects		   = GNLT_03

	HideSubObjects		   = Shield_1OG
	HideSubObjects		   = Shield_2OG
	HideSubObjects		   = SHLD_01
	HideSubObjects		   = SHLD_02

	HideSubObjects		   = BOOT_01
	HideSubObjects		   = BOOT_02
	HideSubObjects		   = BOOT_03
	HideSubObjects		   = Gurthang

	HideSubObjects		   = BARREL

	FadeTimeInSeconds      = 0.0
	End
	
;Конец Анимации

    #include "..\..\..\includes\StunDrawModuleSmall.inc"

	; ***DESIGN parameters ***
	Side = Mordor
	EditorSorting = UNIT
	ThreatLevel = EOWYN_THREAT_LEVEL
	ThingClass = CHARACTER_UNIT
	TransportSlotCount = TRANSPORTSLOTCOUNT_HERO
	BuildCost           = 3000
	BuildTime           = 1
	ShockwaveResistance = 99
	BountyValue         = ROHAN_EOWYN_BOUNTY_VALUE

	DisplayMeleeDamage = SARUMAN_DAMAGE

	;;;;;; WEAPON SETS ;;;;;;	
	WeaponSet
		Conditions			= None 
		Weapon				= PRIMARY   SarumanWeapon
		AutoChooseSources	= PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
	End
	
	;;;;;; Armor Sets ;;;;;;
	ArmorSet
		Conditions      = None
		Armor           = SarumanArmor
		DamageFX        = NormalDamageFX
	End
	

	VisionRange = VISION_HERO_STANDARD				
	ShroudClearingRange = SHROUD_CLEAR_HERO
	MaxVisionBonusPercent = 300%
	VisionBonusTestRadius = 200
	VisionBonusPercentPerFoot = 1.0%

	DisplayName = Vergoth
	RecruitText = VergothRecruit
	ReviveText	= VergothRevive
	;Hotkey		= CONTROLBAR:RohanEowynHotkey	;;			If not, it won't look too bad.
	CrusherLevel = 0			;Can I crush anything?
	CrushableLevel = 2			;What am I?:        0 = for infantry, 1 = for trees, 2 = cavalry/heroes

	CommandSet = VergothCommandSet
	CommandPoints = 5


	; *** AUTO RESOLVE DATA *** 
	AutoResolveUnitType = AutoResolveUnit_Hero
	AutoResolveCombatChain = AutoResolve_HeroCombatChain

	AutoResolveBody = AutoResolve_EowynBody
	
	AutoResolveArmor
		Armor = AutoResolve_EowynArmor
	End

	AutoResolveWeapon
		Weapon = AutoResolve_EowynWeapon
	End

	;AutoResolveLeadership = AutoResolve_EowynBonus


	; *** AUDIO Parameters ***;

	VoiceAttack 							= HeroWizardVoiceAttack
			VoiceAttackAir							= HeroWizardVoiceAttack
			VoiceAttackCharge 						= HeroWizardVoiceAttack
			VoiceAttackMachine 						= HeroWizardVoiceAttack
			VoiceAttackStructure 					= HeroWizardVoiceAttack
			VoiceCreated							= HeroWizardVoiceWandererSalute
			VoiceFear								= HeroWizardVoiceHelpMe
			VoiceFullyCreated						= HeroWizardVoiceWandererSalute
			VoiceGuard								= HeroWizardVoiceMove
			VoiceMove 								= HeroWizardVoiceMove
			VoiceMoveToCamp 						= HeroWizardVoiceMove
			VoiceMoveWhileAttacking 				= HeroWizardVoiceMove
			VoicePriority							= 99
			VoiceRetreatToCastle 					= HeroWizardVoiceMove
			VoiceSelect 							= HeroWizardVoiceSelectMS
			VoiceSelectBattle  						= HeroWizardVoiceSelectBattle
		
			SoundImpact								= ImpactHorse
		
			UnitSpecificSounds
				VoiceAttackFireball					= HeroWizardVoiceAttack
				VoiceEnterUnitElvenTransportShip	= HeroWizardVoiceMove
				VoiceEnterUnitMordorMumakil			= HeroWizardVoiceMove
				VoiceEnterUnitSlaughterHouse		= HeroWizardVoiceMove
				VoiceEnterUnitTransportShip			= HeroWizardVoiceMove
				VoiceGarrison						= HeroWizardVoiceMove
				VoiceInitiateCaptureBuilding		= HeroWizardVoiceCaptureBuilding
			End



    #include "..\..\..\includes\StandardUnitEvaEvents.inc"
	EvaEventDieOwner		= None					;Eva event to trigger on unit's death. NOTICE THAT this is only for permanent deaths

	Behavior = LargeGroupAudioUpdate ModuleTag_LGAU			; Tie into LargeGroupAudio system
		Key = Humanoid_Male Man Man_Female Unit Infantry Hero
		UnitWeight = 2
	End


	; *** ENGINEERING Parameters ***
	RadarPriority = UNIT
	KindOf = HERO PRELOAD SELECTABLE CAN_CAST_REFLECTIONS INFANTRY ATTACK_NEEDS_LINE_OF_SIGHT PATH_THROUGH_EACH_OTHER SCORE DISGUISER ARMY_SUMMARY HEAVY_MELEE_HITTER
	PathfindDiameter = 40.0

	Body = RespawnBody ModuleTag_RespawnBody
		MaxHealth         = SARUMAN_HEALTH
		PermanentlyKilledByFilter	= NONE		;Who kills me permanently?
   		DodgePercent      = HERO_DODGE_PERCENT
	End
	Behavior = RespawnUpdate ModuleTag_RespawnUpdate
;		DeathAnim				= STUNNED				;Model condition to play when killed-to-respawn
		DeathFX				= FX_EowynDieToRespawn		;FXList to play when killed-to-respawn
		DeathAnim				= DYING				;Model condition to play when killed-to-respawn
		DeathAnimationTime		= 6500				;How long DeathAnim will take.
		InitialSpawnFX			= FX_EowynInitialSpawn
		RespawnAnim				= LEVELED				;Animation to play when respawning.
		RespawnFX				= FX_EowynRespawn			;FXList to play when respawning.
		RespawnAnimationTime		= 2000				;Time it takes for respawn to play.
		AutoRespawnAtObjectFilter	= NONE +CASTLE_KEEP		;Respawn at this location -- and at it's exit production point if possible.
		ButtonImage				= 
		
		;RespawnEntries determine the ruleset for how a character can be revived. Some units may automatically respawn, others
		;may require a specific revive action performed on him. You can specify different values for each level... or use Level:Any
		RespawnRules =			AutoSpawn:No	Cost:600		Time:60000		Health:100%		;DEFAULT VALUES
	End

	Behavior = AutoHealBehavior ModuleTag_EowynHealing
		StartsActive = Yes
		HealingAmount = HERO_HEAL_AMOUNT
		HealingDelay = 1000
		StartHealingDelay = HERO_HEAL_DELAY
		HealOnlyIfNotInCombat = Yes
	End
	
	Behavior = AutoAbilityBehavior ModuleTag_AutoAbilityBehavior
	End		
	Behavior = StancesBehavior ModuleTag_StancesBehavior
        StanceTemplate = Hero
    End
	
	#include "..\..\..\includes\CaptureBuilding.inc"

;LUA скрипты "включены"
	
	Behavior = AIUpdateInterface ModuleTag_03
		AutoAcquireEnemiesWhenIdle = Yes ATTACK_BUILDINGS
		MoodAttackCheckRate        = 500
		AILuaEventsList				= ObjectNumber_1_funct_
	End

	Behavior = EmotionTrackerUpdate	Module_EmotionTracker
		TauntAndPointDistance				= 300
		TauntAndPointUpdateDelay			= 10000
		AddEmotion			=	Doom_Base
		//	AddEmotion			=   BraceForBeingCrushed_Base
		//	AddEmotion			=	FearIdle_Base
		//	AddEmotion			=	FearBusy_Base
		AddEmotion			=	Point_Base
		AddEmotion			=	Taunt_Base
 		AddEmotion			=	CheerIdle_Base
		AddEmotion			=	CheerBusy_Base
		//	AddEmotion			=	HeroCheerIdle_Base
		//	AddEmotion			=	HeroCheerBusy_Base
		AddEmotion			=	Alert_Base
		AddEmotion			=	CheerForAboutToCrush_Base
	End
	
	LocomotorSet
		Locomotor = HeroHumanLocomotor
		Condition = SET_NORMAL 
		Speed     = NORMAL_GOOD_HERO_SPEED
	End
	  
	
	Behavior = PhysicsBehavior ModuleTag_04
		GravityMult = 1.0
		ShockStandingTime = 4000	;msec
	End
	 
	Behavior = SlowDeathBehavior ModuleTag_05
		DeathTypes = ALL
		SinkDelay = 5000
		SinkRate = 0.40     ; in Dist/Sec
		DestructionDelay = 14000
		Sound = INITIAL HeroWizardVoiceDie
		ShadowWhenDead = No
	End
	
	Behavior = SquishCollide ModuleTag_06
		;nothing
	End
	
	Behavior = HitReactionBehavior HitReactionBehaviorModuleTag
		HitReactionLifeTimer1 = 2700 ; level 1 (light  damage)  hit reaction animations in msec
		HitReactionLifeTimer2 = 3366 ; level 2 (medium damage)  hit reaction animations in msec
		HitReactionLifeTimer3 = 10 ; level 3 (heavy  damage)  hit reaction animations in msec

		HitReactionThreshold1 = 5.0			; level 1 (light  damage) threshold trigger
		HitReactionThreshold2 = 100.0		; level 2 (medium damage) threshold trigger
		HitReactionThreshold3 = 300.0		; level 3 (heavy  damage) threshold trigger
	End

;////////////////////////////////////////// POWERS / Способности /////////////////////////////////

;------------------FIRES OF DOOM------------------------------------------------------------------
    
    Behavior = SpecialPowerModule ModuleTag_FiresOfDoom                   
        SpecialPowerTemplate        = SpecialAbilityVergothFireOfMorgoth
        UpdateModuleStartsAttack    = Yes
        StartsPaused                = No
       ; InitiateSound                = SauronVoxBlackspeechFiresOfDoom
    End

    Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FiresOfDoomUpdate
        SpecialPowerTemplate    = SpecialAbilityVergothFireOfMorgoth
        WhichSpecialWeapon        = 3
        SkipContinue            = Yes

        UnpackTime              = 3400     
        PackTime                = 1
        FreezeAfterTriggerDuration    = 2500                 

        AwardXPForTriggering    = 900        
        StartAbilityRange        = 80.0
    
        SpecialWeapon            = VergothFireOfMorgoth
        ;TriggerSound            = SpellRainOfFireMS
    End
    
;-------------------------------------BLINK (Teleport) SPELL-----------------------------------------------------
	;Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TeleportEnabler
	;	SpecialPowerTemplate = SpecialAbilityBlink
	;	TriggeredBy			 = Upgrade_Blink_FEM
	;End

	Behavior = SpecialPowerModule ModuleTag_TeleportStarter                      
		SpecialPowerTemplate	 = SpecialAbilityBlink
		UpdateModuleStartsAttack = Yes
		TriggerFX		= FX_Fire_Blink_A
		StartsPaused		= No
	End

	Behavior = TeleportSpecialAbilityUpdate ModuleTag_TeleportUpdate   
		SpecialPowerTemplate  =	SpecialAbilityBlink
		//UnpackingVariation	  =	1

		UnpackTime		 =	1
		PreparationTime		= 	1
		PackTime		=	5000

		//StartAbilityRange        = 900.0

	
		ApproachRequiresLOS	  =	No
		BusyForDuration		  =	1 // don't accept	any	AI for this	long...	ai commands	will be	queued (should be at least PackTime)
		
		DestinationWeaponName =	WeaponBlink_FireBlink	// Fires	at point of	teleport to	push people	away and down.
	End

//--------------------------------------------------------------------------	
//	FIRE BALL SPECIAL POWER //
//--------------------------------------------------------------------------	

Behavior = SpecialPowerModule ModuleTag_FireballStarter_Level1
	SpecialPowerTemplate	 = SpecialAbilityHeroFireball_Level1
	UpdateModuleStartsAttack = Yes
	StartsPaused			 = No
	;InitiateSound			 = SarumanVoiceAttackFireball
End

Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate_Level1
	SpecialPowerTemplate = SpecialAbilityHeroFireball_Level1
	WhichSpecialWeapon	 = 1 // This sets SPECIAL_WEAPON_ONE
	SkipContinue		 = Yes

	UnpackTime			 = 800
	PreparationTime		 = 1   
	PersistentPrepTime	 = 1000	
	PackTime			 = 100
	
	AwardXPForTriggering = 0
	
	StartAbilityRange	 = CREATE_A_HERO_FIREBALL_RANGE
	MustFinishAbility	 = Yes
	SpecialWeapon		 = VergothFireballL1
End

//--------------------------------------------------------------------------	
//	FIRE BALL SPECIAL POWER LEVEL 2//
//--------------------------------------------------------------------------	
;Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballEnabler_L2
;	SpecialPowerTemplate = SpecialAbilityHeroFireball_Level2
;	TriggeredBy			 = Upgrade_VergothFireBall_Level4
;End
;
;Behavior = SpecialPowerModule ModuleTag_FireballStarter_L2
;	SpecialPowerTemplate	 = SpecialAbilityHeroFireball_Level2
;	UpdateModuleStartsAttack = Yes
;	StartsPaused			 = Yes
;	;InitiateSound			 = SarumanVoiceAttackFireball
;End
;
;Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate_L2
;	SpecialPowerTemplate = SpecialAbilityHeroFireball_Level2
;	WhichSpecialWeapon	 = 1
;	SkipContinue		 = Yes
;
;	UnpackTime			 = 800
;	PreparationTime		 = 1   
;	PersistentPrepTime	 = 1000	
;	PackTime			 = 100
;	
;	AwardXPForTriggering = 0
;	
;	StartAbilityRange	 = CREATE_A_HERO_FIREBALL_RANGE
;	MustFinishAbility	 = Yes
;	SpecialWeapon		 = VergothFireballL4
;End

//--------------------------------------------------------------------------	
//	FIRE BALL SPECIAL POWER LEVEL 3//
//--------------------------------------------------------------------------	
;Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballEnabler_L3
;	SpecialPowerTemplate = SpecialAbilityHeroFireball_Level3
;	TriggeredBy			 = Upgrade_VergothFireBall_Level7
;End
;
;Behavior = SpecialPowerModule ModuleTag_FireballStarter_L3
;	SpecialPowerTemplate	 = SpecialAbilityHeroFireball_Level3
;	UpdateModuleStartsAttack = Yes
;	StartsPaused			 = Yes
;	;InitiateSound			 = SarumanVoiceAttackFireball
;End
;
;Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate_L3
;	SpecialPowerTemplate = SpecialAbilityHeroFireball_Level3
;	WhichSpecialWeapon	 = 1
;	SkipContinue		 = Yes
;
;	UnpackTime			 = 800
;	PreparationTime		 = 1   
;	PersistentPrepTime	 = 1000	
;	PackTime			 = 100
;	
;	AwardXPForTriggering = 0
;	
;	StartAbilityRange	 = CREATE_A_HERO_FIREBALL_RANGE
;	MustFinishAbility	 = Yes
;	SpecialWeapon		 = VergothFireballL7
;End

Behavior = MonitorConditionUpdate MonitorConditionUpdateModuleTag
        ModelConditionFlags             = WEAPONSET_TOGGLE_1
        ModelConditionCommandSet         = SarumanCommandSet_2
        End
//Способности

	Behavior = SpecialPowerModule ModuleTag_LeadershipNeededWork
		SpecialPowerTemplate		= SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack	= No
		StartsPaused				= Yes
	End
		Behavior = AttributeModifierAuraUpdate ModuleTag_FaramirLeadership
		StartsActive	= No
		TriggeredBy			 =  Upgrade_SarumanFireBall
		BonusName		= SarumanLeadership
		RefreshDelay	= 5000
		Range			= 750
		AntiCategory	= BUFF
		ObjectFilter	= ALL -STRUCTURE -HERO
	End

//--------------------------------------------------------------------------------


	;;;	FIRE BALL SPECIAL POWER ;;;
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_FireballEnabler
		SpecialPowerTemplate	= SpecialAbilitySarumanFireball
		TriggeredBy				= Upgrade_SarumanFireBall
	End

	Behavior = SpecialPowerModule ModuleTag_FireballStarter                      
		SpecialPowerTemplate		= SpecialAbilitySarumanFireball
		UpdateModuleStartsAttack	= Yes
		StartsPaused			= Yes
		InitiateSound			= SarumanVoiceAttackFireball
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_FireballUpdate   
		SpecialPowerTemplate    = SpecialAbilitySarumanFireball
		WhichSpecialWeapon		= 1
		SkipContinue			= Yes

		UnpackTime             	= 800
		PreparationTime			= 1   
		PersistentPrepTime		= 1000 
		PackTime				= 100
		
		AwardXPForTriggering    = 0
		
		StartAbilityRange		= SARUMAN_FIREBALL_RANGE
		MustFinishAbility		= Yes
		SpecialWeapon			= SarumanFireball
	End

	Behavior = AutoAbilityBehavior ModuleTag_FirBallAutoAbility
		SpecialAbility				= SpecialAbilitySarumanFireball
		MaxScanRange				= #SUBTRACT( SARUMAN_FIREBALL_RANGE 25 )
		Query						= 1 ALL ENEMIES -STRUCTURE
	End

    
 	;;; DOMINATE SPECIAL POWER ;;;
 	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_DominateEnabler
		SpecialPowerTemplate		= SpecialAbilityDominateEnemy
		TriggeredBy					= Upgrade_SarumanDominate
	End

	Behavior = SpecialPowerModule ModuleTag_DominateEnemySpecialPowerModule
		SpecialPowerTemplate		= SpecialAbilityDominateEnemy 
		StartsPaused			= Yes
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= SarumanVoiceDominate
	End

 	Behavior = DominateEnemySpecialPower ModuleTag_DominateEnemySpecialPower
        SpecialPowerTemplate		= SpecialAbilityDominateEnemy 
		UnpackingVariation			= 1
		StartAbilityRange			= 200.0
		
		AttributeModifierAffects	= ALL -DOZER -HERO -STRUCTURE -ARMY_OF_DEAD -MOVE_ONLY -AngmarThrallMaster ENEMIES NEUTRAL

		DominateRadius				= 60 ;100 ;150
		DominatedFX					= FX_SarumanDominateTargets
		TriggerFX					= FX_SarumanDominateTrigger
		
		UnpackTime					= 2000
		PreparationTime				= 1   
		FreezeAfterTriggerDuration	= 2500 ; Hold AI for this long after we fire.		
    End
 
	;;; SPEECH CRAFT LEVEL GAIN SPECIAL POWER ;;;
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_KingsFavorEnabler
		SpecialPowerTemplate		= SpecialAbilityKingsFavor
		TriggeredBy					= Upgrade_SarumanSpeechCraft
	End

 	Behavior = SpecialPowerModule ModuleTag_KingsFavorSpecialPowerModule
        SpecialPowerTemplate		= SpecialAbilityKingsFavor
        StartsPaused				= Yes
		UpdateModuleStartsAttack	= Yes
        InitiateSound				= SarumanVoiceSpeechCraft
    End

 	Behavior = LevelGrantSpecialPower ModuleTag_KingsFavor
		SpecialPowerTemplate		= SpecialAbilityKingsFavor
		UnpackingVariation			= 2
		StartAbilityRange			= 200.0
;		LevelFX = FX_PorterDeliver

		Experience					= 50
		RadiusEffect				= 100
		AcceptanceFilter			= KINGSFAVOR_OBJECTFILTER
		LevelFX						= FX_LevelUp
		
		UnpackTime					= 2000
		PreparationTime				= 1   
		FreezeAfterTriggerDuration	= 2500 ; Hold AI for this long after we fire.		
    End
	 
	;;; WIZARD BLAST SPECIAL POWER ;;;	
	Behavior = SpecialPowerModule ModuleTag_WizardBlastStarter							
		SpecialPowerTemplate		= SpecialPowerTelekeneticPush
		UpdateModuleStartsAttack	= Yes
		InitiateSound			= SarumanVoiceAttackWizardBlast
	End	

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_WizardBlastUpdate
		SpecialPowerTemplate		= SpecialPowerTelekeneticPush
		WhichSpecialWeapon		    = 2 ;
		SkipContinue				= Yes
		UnpackTime					= 700
		PreparationTime				= 1   
		PersistentPrepTime			= 1000
		PackTime					= 100
		
		AwardXPForTriggering		= 0
		StartAbilityRange			= 80.0
		MustFinishAbility			= Yes
		SpecialWeapon				= SarumanWizardBlast
	End

	Behavior = AutoAbilityBehavior ModuleTag_WizardBlastAutoAbility
		SpecialAbility				= SpecialPowerTelekeneticPush
		MaxScanRange				= #SUBTRACT( GANDALF_FORCE_ATTACK_RANGE 25 )
		Query						= 1 ALL ENEMIES -STRUCTURE
	End
	

;//---------------------------------LIGHTNING BLAST-----------------------------------------
	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_IstariLightEnabler
		SpecialPowerTemplate = SpecialAbilityLightingBolt
		TriggeredBy = Upgrade_SarumanThunderBolt
	End
	Behavior = SpecialPowerModule ModuleTag_IstariLightPower                      
		SpecialPowerTemplate		= SpecialAbilityLightingBolt
		UpdateModuleStartsAttack	= Yes
		StartsPaused				= Yes
		InitiateSound				= SarumanVoiceAttackCharge
	End

	Behavior = WeaponFireSpecialAbilityUpdate ModuleTag_IstariLightUpdate
		SpecialPowerTemplate    = SpecialAbilityLightingBolt
		SkipContinue			= Yes
		UnpackTime              = 1500
 		PreparationTime         = 1  
 		PersistentPrepTime      = 1000
 		PackTime                = 500
		AwardXPForTriggering    = 0
		StartAbilityRange		= 290; Note: This has to be smaller than the weapon range or it'll never succeed
		ApproachRequiresLOS		= Yes		
		SpecialWeapon			= SarumanLightningBlastWeapon
		MustFinishAbility		= Yes
		WhichSpecialWeapon		= 3
		BusyForDuration			= 2500
	End

	Behavior = AutoAbilityBehavior ModuleTag_LighntingAutoAbility
		SpecialAbility				= SpecialAbilityLightingBolt
		MaxScanRange				= #SUBTRACT( SARUMAN_LIGHTNING_RANGE 25 )
		Query						= 1 ALL ENEMIES -STRUCTURE
	End
	
	;///////////////////
	; AISpecialPowers
	;///////////////////
	
	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceBattle
		CommandButtonName = Command_SetStanceBattle
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEBATTLE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeStanceAggressive
		CommandButtonName = Command_SetStanceAggressive
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEAGGRESSIVE
	End

	Behavior = AISpecialPowerUpdate GondorFighterHordeHoldGround
		CommandButtonName = Command_SetStanceHoldGround
		SpecialPowerAIType = AI_SPECIAL_POWER_STANCEHOLDGROUND
	End

	
	Behavior = AISpecialPowerUpdate GandalfToggleMountedAI
		CommandButtonName = Command_SpecialAbilitySpeechCraft
		SpecialPowerAIType = AI_SPECIAL_POWER_GIVEXP_AOE
		SpecialPowerRadius = 30.0
	End

	Behavior = AISpecialPowerUpdate WizardBlastAI
		CommandButtonName = Command_SpecialAbilityIsengardWizardBlast
		SpecialPowerAIType = AI_SPECIAL_POWER_GANDALF_WIZARD_BLAST
		SpecialPowerRadius = 100
	End
	
	Behavior = AISpecialPowerUpdate FireballAI
		CommandButtonName = Command_SarumanFireball
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
	End

	Behavior = AISpecialPowerUpdate ThunderboltAI
		CommandButtonName = Command_SarumanThunderBolt
		SpecialPowerAIType = AI_SPECIAL_POWER_ENEMY_TYPE_KILLER
	End
	
	Behavior = AISpecialPowerUpdate DominateAI
		CommandButtonName = Command_SpecialAbilityDominateEnemy
		SpecialPowerAIType = AI_SPECIAL_POWER_DOMINATE_ENEMY
		SpecialPowerRadius = 200
	End

;/////////////////////////////////////////////////////////////////////////////////////////////////

	

	

	Geometry			= CYLINDER
	GeometryMajorRadius = 8.0
	GeometryHeight		= 25
	GeometryIsSmall		= Yes
	
	Shadow				= SHADOW_DECAL
	ShadowSizeX			= 20
	ShadowSizeY			= 20
	ShadowTexture		= ShadowI
End

