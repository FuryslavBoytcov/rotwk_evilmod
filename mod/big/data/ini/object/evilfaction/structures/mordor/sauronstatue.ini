;//Evil Mod 2 ///////////////////////////////////////////////////////////
;Fixed version!	/////////////////////////////////////////////////////////
;////////////////////////////////////////////////////////////////////////

Object DolGoldurStatue


; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode        = yes ;// Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
      Model = DolGlStatue
    ; ParticleSysBone = NONE SauronStatueEffect_1 FollowBone:yes
    ;  ParticleSysBone = NONE SauronStatueEffect_2 FollowBone:yes
    End

        ;--damaged building

        ModelConditionState  = DAMAGED
        Model         = DolGlStatue_D1
            ParticleSysBone FireSmall05 SmokeBuildingLarge
        End
        AnimationState = DAMAGED
            EnteringStateFX    = FX_BuildingDamaged
        End

        ModelConditionState  = REALLYDAMAGED
        Model         = DolGlStatue_D2
            ParticleSysBone FireSmall05 SmokeBuildingLarge
        End
        AnimationState = REALLYDAMAGED
              Animation                =    RubbleAnimation
                AnimationName        =    DolGlStatue_D2.DolGlStatue_D2
                AnimationMode        =    ONCE
              End
            EnteringStateFX    = FX_BuildingReallyDamaged
        End

         ModelConditionState  = RUBBLE
        Model         = DolGlStatue_D3
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
        End
        
        AnimationState = RUBBLE
            Animation                =    RubbleAnimation
                AnimationName        =    DolGlStatue_D3.DolGlStatue_D3
                AnimationMode        =    ONCE
              End
        EnteringStateFX    = FX_BuildingReallyDamaged
        End

        ModelConditionState  = POST_RUBBLE
        Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

        ModelConditionState  = POST_COLLAPSE
        Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End  
    
  End

//Icy Mist //Blessed Mist
	Draw = W3DScriptedModelDraw ModuleTag_DrawMist
		
		DefaultModelConditionState
			Model				= None
			;ParticleSysBone		= NONE IceWallMist
			;ParticleSysBone		= NONE IceWallMist02
			ParticleSysBone = NONE SauronStatueEffect_1 ;FollowBone:yes
			ParticleSysBone = NONE SauronStatueEffect_2 ;
		End		
	End




; ***DESIGN parameters ***
	DisplayName      = DolGulStatue
	Description      = EvilMod:SauronStatue

	Side                = Mordor
	EditorSorting       = STRUCTURE
	ThreatLevel 	    = WALL_THREAT_LEVEL		;1.0

	CommandSet          = SellableCommandSet
	BuildCost           = DWARVEN_STATUE_BUILDCOST
	BuildTime           = DWARVEN_STATUE_BUILDTIME
	RefundValue         = DWARVEN_STATUE_REFUND_VALUE
	BountyValue         = DWARVEN_STATUE_BOUNTY_VALUE
	VisionRange         = DWARVEN_STATUE_VISIONRANGE
	ShroudClearingRange = DWARVEN_STATUE_SHROUDCLEAR
	CommandPointBonus	= GENERIC_STATUE_COMMAND_POINT_BONUS
	
	ArmorSet
	Conditions        = None
	Armor             = StructureArmor
	End


	; *** AUDIO Parameters ***
	#include "..\..\..\Includes\StandardBuildingEvaEvents.inc"

	VoiceFullyCreated				= EVA:GenericBuildingComplete-Builder-Dwarf
	VoiceSelect						= GondorStatueSelect
	VoiceSelectUnderConstruction	= BuildingGoodVoiceSelectUnderConstruction

	SoundAmbientDamaged				= BuildingDamageFireSmallLoop
	SoundAmbientReallyDamaged		= BuildingDamageFireMediumLoop
	SoundOnDamaged					= BuildingLightDamageStone
	SoundOnReallyDamaged			= BuildingHeavyDamageStone


	UnitSpecificSounds
		UnderConstruction		= BuildingConstructionLoop  ; Built first time
		; UnderRepairFromDamage	= NoSound					; Repaired No animation on the building, so don't bother playing sound
		UnderRepairFromRubble	= BuildingConstructionLoop	; Repaired from completely destroyed (not used???)
	End

	; *** ENGINEERING Parameters ***

	RadarPriority       = STRUCTURE
	KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_STONE CAN_SEE_THROUGH_STRUCTURE IGNORE_FOR_VICTORY
		
	Behavior            = GettingBuiltBehavior GetBuiltBehaviorTag
		WorkerName		= AngmarWorkerNoSelect
		SpawnTimer		= DEFAULT_STRUCTURE_HEALDELAY
	End

	Body                        = StructureBody ModuleTag_05
		MaxHealth         		    = DWARVEN_STATUE_MAXHEALTH
		MaxHealthDamaged  		    = DWARVEN_STATUE_MAXHEALTHDAMAGED
		MaxHealthReallyDamaged 	  	= DWARVEN_STATUE_MAXHEALTH_REALLYDAMAGED
		
	End

	Behavior                  = BuildingBehavior BuildingModuleTag
	
	End


	Behavior                  = StructureCollapseUpdate ModuleTag_06
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 120
	End

	Behavior = PassiveAreaEffectBehavior ModuleTag_FeelGoodHero
		EffectRadius			= 900
		PingDelay			    = 6000
		ModifierName			= SauronstatueLeadership
		AntiCategories			= LEADERSHIP
		AllowFilter				= ANY +HERO -STRUCTURE +INFANTRY +CAVALRY +MONSTER
	End

	Behavior = PassiveAreaEffectBehavior ModuleTag_MysticFountainsHealing
		EffectRadius		    = 900		
		PingDelay		        = 6000
		HealPercentPerSecond    = 4%
		AllowFilter		        = ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER -STRUCTURE
		NonStackable		    = No
		HealFX			        = FX_SpellHealUnitHealBuff_ST
	End

	
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module for Well Object
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate				= 10000	;5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde		= Yes
		ReplenishAllNearbyHordes	= Yes
		ScanHordeDistance		= 200
	End

	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
		Radius			= 0		;// How far we try to claim ground
		MaxIncome		= 0			;// If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval	= 999999	;// How often (in msec) we give that much money
		HighPriority	= Yes		;// A high priority claim gets to pretend it was there first.
		Visible = No 		;// Don't show decal when a resource building is selected.
	End

	Behavior = CostModifierUpgrade ModuleTag_CostModifierUpgrades
		LabelForPalantirString = GUI:SauronstatueDiscount
		StartsActive = Yes
		ObjectFilter	= ANY +INFANTRY +HERO +MONSTER +CAVALRY
		UpgradeDiscount	= No
		Percentage		= -2%
		Percentage		= -4%
		Percentage		= -6%
	End

    Geometry = BOX
    GeometryMajorRadius = 50
    GeometryMinorRadius = 50
    GeometryHeight = 120

    Shadow          = SHADOW_VOLUME
    GeometryIsSmall = No
    BuildCompletion = PLACED_BY_PLAYER

	GeometryContactPoint = X:-10		Y:10		Z:0			Repair
	GeometryContactPoint = X:10		    Y:-10		Z:0			Repair
	GeometryContactPoint = X:5.576		Y:44.987	Z:0
	GeometryContactPoint = X:-38.348	Y:-42.113	Z:0
	GeometryContactPoint = X:-28.448	Y:-0.003	Z:75.14		Swoop
	
End

//Old version and not work leadership!

;------------------------------------------------------------------------------
//healing+leader
//sauron statue
ChildObject DolGoldurStatueFail_not_leadership NecromancerStatue

  ; *** ART Parameters ***
  Draw = W3DScriptedModelDraw ModuleTag_01
    StaticModelLODMode        = yes ;// Will append M or L to the skin name depending on GameLOD

    DefaultModelConditionState
      Model = DolGlStatue
    End

        ;--damaged building

        ModelConditionState  = DAMAGED
        Model         = DolGlStatue_D1
            ParticleSysBone FireSmall05 SmokeBuildingLarge
        End
        AnimationState = DAMAGED
            EnteringStateFX    = FX_BuildingDamaged
        End

        ModelConditionState  = REALLYDAMAGED
        Model         = DolGlStatue_D2
            ParticleSysBone FireSmall05 SmokeBuildingLarge
        End
        AnimationState = REALLYDAMAGED
              Animation                =    RubbleAnimation
                AnimationName        =    DolGlStatue_D2.DolGlStatue_D2
                AnimationMode        =    ONCE
              End
            EnteringStateFX    = FX_BuildingReallyDamaged
        End

         ModelConditionState  = RUBBLE
        Model         = DolGlStatue_D3
        ParticleSysBone SmokeLarge01 SmokeBuildingLarge
        End
        
        AnimationState = RUBBLE
            Animation                =    RubbleAnimation
                AnimationName        =    DolGlStatue_D3.DolGlStatue_D3
                AnimationMode        =    ONCE
              End
        EnteringStateFX    = FX_BuildingReallyDamaged
        End

        ModelConditionState  = POST_RUBBLE
        Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End

        ModelConditionState  = POST_COLLAPSE
        Model         = None
            ParticleSysBone NONE SmokeBuildingMediumRubble
        End  
    
  End

	; ***DESIGN parameters ***
  	DisplayName      = DolGulStatue
	Description      = EvilMod:SauronStatue 
  	//EditorSorting   = MISC_MAN_MADE
	//Side	= Mordor
	//IsTrainable			= No
	ThreatLevel			= 1.0
	BuildCost			= 200
	BuildTime			= 30
	RefundValue			= 100
	VisionRange			= 300.0	; Shroud clearing distance
	ShroudClearingRange	= 160
	CommandSet			= SellableCommandSet
	CommandPointBonus	= 25
  

  ; *** ENGINEERING Parameters ***
	RadarPriority		= STRUCTURE
	//KindOf				= PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE MADE_OF_STONE CAN_SEE_THROUGH_STRUCTURE FS_FACTORY CAN_ATTACK CHUNK_VENDOR
	
	
	Behavior = GettingBuiltBehavior ModuleTag_04
		WorkerName					= AngmarWorkerNoSelect
		SpawnTimer	= DEFAULT_STRUCTURE_HEALDELAY
	End

	Body                = StructureBody ModuleTag_05
    	MaxHealth         		= 5000
    	MaxHealthDamaged  		= GONDOR_STATUE_HEALTH_DAMAGED
    	MaxHealthReallyDamaged 	= GONDOR_STATUE_HEALTH_REALLY_DAMAGED
  	End

	;Flammability
	;	Fuel						=	MEN_STATUE_FIRE_FUEL	
	;	MaxBurnRate					=	MEN_STATUE_FIRE_MAX_BURN_RATE
	;	Decay						=	MEN_STATUE_FIRE_DECAY
	;	Resistance					=	MEN_STATUE_FIRE_RESISTANCE
	;End

	//Behavior = ProductionUpdate ModuleTag_06
	//	// nothing
	//End


;	Behavior = DestroyDie ModuleTag_07
;	End
	
	Behavior                  = StructureCollapseUpdate ModuleTag_Collapse
		MinCollapseDelay        = 000
		MaxCollapseDelay        = 000
		CollapseDamping         = .5
		MaxShudder              = 0.6
		MinBurstDelay           = 250
		MaxBurstDelay           = 800
		BigBurstFrequency       = 4
		FXList                  = INITIAL   FX_StructureMediumCollapse
		FXList                  = ALMOST_FINAL  FX_StructureAlmostCollapse
		DestroyObjectWhenDone	= Yes
		CollapseHeight			= 55
	End
	

	Behavior = UnpauseSpecialPowerUpgrade ModuleTag_TheodenLeadership
		SpecialPowerTemplate = SpecialAbilityFakeLeadership
		TriggeredBy = Upgrade_AragornLeadership
	End

	Behavior = SpecialPowerModule ModuleTag_TheodenLeadershipUpdate   
		SpecialPowerTemplate      = SpecialAbilityFakeLeadership
		UpdateModuleStartsAttack  = No
		StartsPaused = Yes
	End

	Behavior = AttributeModifierAuraUpdate ModuleTag_BannerLeadership
		StartsActive	= No
		BonusName		= AngmarFortressBannersLeadership
		TriggeredBy		= Upgrade_AragornLeadership
		RefreshDelay	= 5000
		Range			= 900
		ObjectFilter	= ALL
	End

	Behavior = PassiveAreaEffectBehavior ModuleTag_MysticFountainsHealing
		EffectRadius		= 200		
		PingDelay		= 4000
		HealPercentPerSecond	= 3%
		AllowFilter		= ALL //ANY +INFANTRY +CAVALRY +HERO -MACHINE +MONSTER -IMMOBILE +DOZER
		NonStackable		= Yes
		HealFX			= FX_SpellHealUnitHealBuff
	End

	
	;/////////////////////////////////////////////////////////
	;// BannerCarrierUpdate module for Well Object
	;/////////////////////////////////////////////////////////
	Behavior = BannerCarrierUpdate BannerCarrierUpdateModuleTag
		IdleSpawnRate				= 10000	;5000							; spawn a new member every n seconds when idle (in miliseconds)		
		UnitSpawnFX				= FX_BannerCarrierSpawnUnit		; name of particle FX to use when the BannerCarrier spawns a new unit		

		; This well object acts like a banner carrier except it spawns unit on nearby hordes instead of itself.
		ReplenishNearbyHorde		= Yes
		ReplenishAllNearbyHordes	= Yes
		ScanHordeDistance		= 200
	End

	Behavior = TerrainResourceBehavior ModuleTag_NewMoneyDeadSpot
		Radius = 0		; How far we try to claim ground
		MaxIncome = 0	; If we were to get all we wanted, how much we would earn.  Linear slope to 0 at 0% claim
		IncomeInterval = 999999	; How often (in msec) we give that much money
		HighPriority = Yes ; A high priority claim gets to pretend it was there first.
		Visible = No 		;// Don't show decal when a resource building is selected.
	End
	
//----------------------------------------------------------------------------------------
    Shadow          = SHADOW_VOLUME
    
    Geometry = BOX
    GeometryMajorRadius = 30
    GeometryMinorRadius = 30
    GeometryHeight = 120
    GeometryIsSmall = Yes

	GeometryContactPoint = X:-10		Y:10		Z:0			Repair
	GeometryContactPoint = X:10		Y:-10		Z:0			Repair
	GeometryContactPoint = X:5.576		Y:44.987	Z:0
	GeometryContactPoint = X:-38.348	Y:-42.113	Z:0
	GeometryContactPoint = X:-28.448	Y:-0.003	Z:75.14		Swoop
End
